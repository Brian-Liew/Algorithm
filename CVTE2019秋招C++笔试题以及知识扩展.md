# CVTE2019秋招C++笔试题以及知识扩展

#### 1、weak_ptr的作用

weak_ptr是为了配合shared_ptr而引入的一种智能指针，没有重载operator*和->,它的最大作用在于协助shared_ptr工作，像旁观者那样观测资源的使用情况。weak_ptr可以从一个shared_ptr或者另一个weak_ptr对象构造，获得资源的观测权。但weak_ptr没有共享资源，它的构造不会引起指针引用计数的增加。使用weak_ptr的成员函数use_count()可以观测资源的引用计数，另一个成员函数expired()的功能等价于use_count()==0,但更快，表示被观测的资源(也就是shared_ptr的管理的资源)已经不复存在。weak_ptr可以使用一个非常重要的成员函数lock()从被观测的shared_ptr获得一个可用的shared_ptr对象， 从而操作资源。但当expired()==true的时候，lock()函数将返回一个存储空指针的shared_ptr。
引用自：https://www.baidu.com/link?url=wPocDr4p2eBxApqnlquBKO1l_FJtGEwj7p39JuwVBf9Ny4tv3M_UJaFVK2cVl28L&wd=&eqid=a90b4b940012bd8c000000065d720b70

而相比之下：*shared_ptr*是一种智能指针（smart pointer），作用有如同指针，但会记录有多少个*shared_ptr*s共同指向一个对象

#### 2、ICMP是传输层协议吗？

不是，是网络层

![tcpip](F:\markdown\tcpip.png)

对于TCP/IP的四层结构而言，首先是网络接口层：这一层包括了物理层以及数据链路层，负责数据在主机与网络之间的交换，地址解析协议（ARP)工作在该层（在OSI七层协议体系中是这样的，相当于一个访问接口，向上传输IP分组；

其次是网络层：这一层是相对比较重要的，将分组发往目的主机，定义了IP协议，需要完成路由功能。而传输层就是是源端主机与目的端主机会话，定义了TCP以及UDP，这个是个重要的知识点，大家自行解决，不作展开。对于最上面的应用层就是各种FTP、HTTP等等。

这里的ARP、RARP、ICMP、IGMP都是网络层。

#### 3、vector的函数：

reserve：改变当前分配空间的大小

rbegin：反转后将开始的指针返回

rend：反转后结束的指针返回

#### 4、  在一个请求分页虚拟存储管理系统中，一个程序运行的页面走向是：1、2、3、4、2、1、5、6、2、1、2、3、7、6、3、2、1、2、3、6．分别用FIFO和LRU算法，对分配给程序的物理块数M分别为3和4时，试计算访问过程中所发生的缺页次数和缺页率？  （类似）

#### 5、某系统中有11台打印机，N个进程共享打印机资源，每个进程要求3台，当N的取值不超过（）时系统不会发生死锁

用哲学家就餐问题的思想解决此类问题，每个进程要求3台，所以先给每个进程2台，再如果多出一台，分给某一个进程，等这个进程执行完了，释放自己的资源给其他进程用，这样就不会发生死锁。即2N+1=11，得N=5。N=4时，不是最大值，不符合题意，N=6时，资源不够用，可能死锁。

#### 6、STL的push_back函数关于拷贝的问题：

在使用push_back函数时，首先会对这个元素进行拷贝（如果没有自己写深拷贝函数，就会调用浅拷贝函数），然后函数结束后会调用该函数的析构函数。

#### 7、编程题：

#### （1）计算K在0-n之间出现的次数，（如1在0-12的数中出现了5次，11包含两个1）：

这道题我直接就暴力搜了，每一个数不断去除以10，取余检查有没有相等。

#### （2）给一个序列，将其划分为两个没有公共数字的连续子序列，使得左右序列非空，同时左边序列每个数小于右边，同时左边的序列尽可能小，（如 5、0、3、8、6，应该划分为5、0、3和8、6）

我是从数组最后开始往数组头开始搜索，取出当前走过的数字的最小值，如果小于数组的第一个值就是找到这个划分的位置。

#### 8、二叉堆中第一个元素在数组中为0，它的左子树就是：

2\*i+1，右子树2\*i+2，父树：（i-1）/2

#### 9、下面哪几个变量int x的操作需要同步：

- ```
  x=y
  ```

- ```
  x++
  ```

- ```
  ++x
  ```

- ```
  x=1
  ```

答案：abc，要加锁就需要同步

#### 10、在统计文件系统中，未用磁盘空间的指令：

df

